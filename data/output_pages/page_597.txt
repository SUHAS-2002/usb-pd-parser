Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10
Page 597
8.3.2.9.4.3
  Data Role Swap, Initiated by DFP Operating as Sink (Wait)
Figure 8.51, "Data Role Swap with Wait, DFP operating as Sink initiates" shows an example sequence between a Port, 
which is initially a UFP (Device) and a Source (Rp asserted), and a Port which is initially a DFP (Host) and a Sink (Rd 
asserted). A Data Role Swap is initiated by the DFP. During the process the Port Partners maintain their operation 
as either a Source or a Sink (power and Rp/Rd remain constant) and the exchange of Data Roles is delayed with a 
wait.
Figure 8.51 Data Role Swap with Wait, DFP operating as Sink initiates
: Protocol
10: Send Wait
: PHY
: PHY
: Protocol
11:Wait
12: Wait + CRC
13: Wait
Start CRCReceiveTimer
Check MessageID against local copy
Store copy of MessageID
14: Wait received
15: GoodCRC
16: GoodCRC + CRC
17: GoodCRC
Check and increment MessageIDCounter
Stop CRCReceiveTimer
18:Wait sent
: Policy Engine
: Policy Engine
Initial UFP Source Port
Initial DFP Sink Port
Stop SenderResponseTimer
CC = Rp (Source)
Port Data Role = UFP (Device)
CC = Rd (Sink)
Port Data Role = DFP (Host)
CC = Rp (Source)
Port Data Role -> UFP (Device)
1: Send Dr_Swap
2: Dr_Swap
3: Dr_Swap + CRC
4: Dr_Swap
Check MessageID against local copy
Store copy of MessageID
5: Dr_Swap received
6: GoodCRC
7: GoodCRC + CRC
8: GoodCRC
9: Dr_Swap sent
Start CRCReceiveTimer
Check and increment MessageIDCounter
Stop CRCReceiveTimer
Evaluate Dr_Swap request
CC = Rp (Source)
Port Data Role = UFP (Device)
Start SenderResponseTimer
CC = Rd (Sink)
Port Data Role = DFP (Host)
CC = Rd (Sink)
Port Data Role -> DFP (Host)
