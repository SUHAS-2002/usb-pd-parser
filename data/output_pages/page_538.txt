Page 538
Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10
Figure 8.33 Successful Power Role Swap Sequence Initiated by the Source
: Protocol
1: Send PR_Swap
: PHY
: PHY
: Protocol
2:PR_Swap
3: PR_Swap + CRC
4: PR_Swap
Start CRCReceiveTimer
Check MessageID against local copy
Store copy of MessageID
5: PR_Swap received
6: GoodCRC
7: GoodCRC + CRC
8: GoodCRC
Check and increment MessageIDCounter
Stop CRCReceiveTimer
9:PR_Swap sent
Start SenderResponseTimer
10: Send Accept
11: Accept
12: Accept + CRC
13: Accept
Check MessageID against local copy
Store copy of MessageID
14: Accept received
15: GoodCRC
16: GoodCRC + CRC
17: GoodCRC
18: Accept sent
Start CRCReceiveTimer
Check and increment MessageIDCounter
Stop CRCReceiveTimer
19: Send PS_RDY
20: PS_RDY
21: PS_RDY + CRC
22: PS_RDY
Start CRCReceiveTimer
Check MessageID against local copy
Store copy of MessageID
23: PS_RDY received
24: GoodCRC
25: GoodCRC + CRC
26: GoodCRC
Check and increment MessageIDCounter
Stop CRCReceiveTimer
27: PS_RDY sent
Stop PSSourceOffTimer
CC -> Rp
Set Power Supply to 5V output
Evaluate PR_Swap 
request
: Policy Engine
: Policy Engine
Initial Source Port
Initial Sink Port
Start PSSourceOffTimer
Tell Power Sink to stop 
sinking current
Power Supply stops sourcing power
CC -> Rd
28: Send PS_RDY
29: PS_RDY
30: PS_RDY + CRC
31: PS_RDY
Check MessageID against local copy
Store copy of MessageID
32: PS_RDY received
33: GoodCRC
34: GoodCRC + CRC
35: GoodCRC
36: PS_RDY sent
Start CRCReceiveTimer
Check and increment MessageIDCounter
Stop CRCReceiveTimer
Reset CapsCounter
Reset Protocol Layer
Start SwapSourceStartTimer
Start PSSourceOnTimer
Port Power Role -> Source
Port Power Role -> Sink
Stop SenderResponseTimer
Tell Power Supply to stop sourcing power
Power Supply reaches 5V 
output
Stop PSSourceOnTimer
Tell Power Sink to start 
sinking power
Reset Protocol Layer
New Power Roles
Port Power Role = Source
CC = Rp
Port Power Role = Sink
CC = Rd
