Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10
Page 891
8.3.3.19.2
  UFP to DFP Data Role Swap State Diagram
Figure 8.175, "UFP to DFP Data Role Swap State Diagram" shows the additional state diagram required to perform 
a Data Role Swap from DRP UFP to DFP operation and the changes that Shall be followed for error and Hard Reset 
handling.
Figure 8.175 UFP to DFP Data Role Swap State Diagram
8.3.3.19.2.1
  PE_SRC_Ready or PE_SNK_Ready State
The Data Role Swap process Shall start only from the either the PE_SRC_Ready or PE_SNK_Ready state where 
power is stable.
The Policy Engine Shall transition to the PE_DRS_UFP_DFP_Evaluate_Swap state when:

A DR_Swap Message is received and

There are no Active Modes (not in Modal Operation).
PE_SRC_Ready or 
PE_SNK_Ready
(UFP)
PE_DRS_UFP_DFP_Evaluate_Swap
Actions on entry:
Get evaluation of Data Role Swap 
request from Device Policy Manager
PE_DRS_UFP_DFP_
Change_to_DFP
Actions on entry:
Request Device Policy Manager to 
change port to DFP
Data Role Swap required 
(indication from 
Device Policy Manager)
PE_DRS_UFP_DFP_
Send_Swap
Actions on entry:
Send Swap DR Message
Initialize and run 
SenderResponseTimer
Reject Message received |
Wait Message received |
SenderResponseTimer 
timeout
PE_DRS_UFP_DFP_
Accept_Swap
Actions on entry:
Send Accept Message
Accept received
PE_DRS_UFP_DFP_
Reject_Swap
Actions on entry:
Send Reject or Wait Message as 
appropriate
Power = Explicit Contract
PD = Connected
Message sent
DR_Swap Message received &
not in Modal Operation
Data Role Swap ok
Data Role Swap not ok |
Further evaluation 
required
Accept Message
sent
Port changed to DFP
PE_SRC_Ready or 
PE_SNK_Ready
(DFP)
Power = Explicit Contract
PD = Connected
Power = Explicit Contract
PD = Connected
Power = Explicit Contract
PD = Connected
Power = Explicit Contract
PD = Connected
PE_SRC_Hard_Reset or 
PE_SNK_Hard_Reset
DR_Swap Message received &
in Modal Operation
