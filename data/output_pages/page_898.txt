Page 898
Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10
Figure 8.177 Dual-role Port in Sink to Source Power Role Swap State Diagram
8.3.3.19.4.1
  PE_SNK_Ready State
The Power Role Swap process Shall start only from the PE_SNK_Ready state where power is stable.
The Policy Engine Shall transition to the PE_PRS_SNK_SRC_Evaluate_Swap state when:
PE_SNK_Ready
PE_PRS_SNK_SRC_
Evaluate_Swap
Actions on entry:
Get evaluation of swap request 
from Device Policy Manager
Power = Explicit Contract
PD = Connected
PE_PRS_SNK_SRC_
Transition_to_off
Actions on entry:
Initialize and run PSSourceOffTimer
Tell Device Policy Manager to turn off 
Power Sink.
Power = Transition to stop sinking
PD = Connected
Power Role Swap required 
(indication from 
Device Policy Manager)
PE_PRS_SNK_SRC_
Send_Swap
Actions on entry:
Send PR_Swap Message
Initialize and run SenderResponseTimer
Power = Explicit Contract
PD = Connected
Reject Message received |
Wait Message received |
SenderResponseTimer 
timeout
PE_PRS_SNK_SRC_Accept_Swap
Actions on entry:
Send Accept Message
Disable Fast Role Swap Receiver if enabled
Power = Explicit Contract
PD = Connected
Accept Message
received
PE_PRS_SNK_SRC_
Reject_Swap
Actions on entry:
Send Reject or Wait Message 
as appropriate
Power = Explicit Contract
PD = Connected
PR_Swap Message received
Power Role Swap ok
Power Role Swap not ok |
Further evaluation
required
Accept Message sent
PE_PRS_SNK_SRC_
Source_on
Actions on entry:
Tell Device Policy Manager to turn on 
Source
Power = Transition to source on
PD = Connected
VBUS is at vSafe5V
Actions on exit:
Send PS_RDY Message
PE_SRC_Startup
Message sent
PE_PRS_SNK_SRC_
Assert_Rp
Actions on entry:
Request DPM to assert Rp
Power = Source off
PD = Connected
PS_RDY Message received
Rp asserted
ErrorRecovery
PS_RDY Message not sent 
after retries (no GoodCRC received)
PSSourceOffTimer timeout
