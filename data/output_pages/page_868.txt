Page 868
Universal Serial Bus Power Delivery Specification, Revision 3.2, Version 1.1, 2024-10
8.3.3.11
  Battery Capabilities State Diagrams
8.3.3.11.1
  Get Battery Capabilities State Diagram
Figure 8.154, "Get Battery Capabilities State Diagram" shows the state diagram for a Source or Sink on receiving a 
request from the Device Policy Manager to get the Port Partner's Battery capabilities for a specified Battery. See also 
Section 6.5.5, "Battery_Capabilities Message".
Figure 8.154 Get Battery Capabilities State Diagram
8.3.3.11.1.1
  PE_Get_Battery_Cap State
The Policy Engine Shall transition to the PE_Get_Battery_Cap state, from either the PE_SRC_Ready or 
PE_SNK_Ready state, due to a request to get the remote Battery capabilities, for a specified Battery, from the Device 
Policy Manager. 
On entry to the PE_Get_Battery_Cap state the Policy Engine Shall send a Get_Battery_Cap Message and initialize 
and run the SenderResponseTimer.
On exit from the PE_Get_Battery_Cap state the Policy Engine Shall inform the Device Policy Manager of the outcome 
(capabilities or response timeout).
The Policy Engine Shall transition back to either the PE_SRC_Ready or PE_SNK_Ready state as appropriate (see 
Figure 8.132, "Source Port State Diagram" and Figure 8.133, "Sink Port State Diagram") when:

A Battery_Capabilities Message is received

Or SenderResponseTimer times out.
get Battery capabilities 
request 
from Device Policy Manager
Battery_Capabilities
Message received |
SenderResponseTimer
Timeout
PE_SRC_Ready or 
PE_SNK_Ready
PE_Get_Battery_Cap
Actions on entry:
Send Get_Battery_Cap Message
Initialize and run SenderResponseTimer
Power = Explicit Contract 
PD = Connected
Actions on exit:
Pass Battery capabilities/outcome to Device Policy Manager
